# Development Environment Configuration for Hodei Jobs Platform
# CRC OpenShift Cluster

# =============================================================================
# DATABASE
# =============================================================================
# PostgreSQL: usa port-forward si estás fuera del cluster
# Para acceso desde dentro del cluster:
# HODEI_DATABASE_URL=postgres://postgres:postgres@postgres.hodei-jobs.svc.cluster.local:5432/hodei_jobs
HODEI_DATABASE_URL=postgres://postgres:postgres@localhost:5432/hodei_jobs

# =============================================================================
# SERVER (gRPC)
# =============================================================================
HODEI_SERVER_BIND=0.0.0.0:9090
HODEI_SERVER_ADDRESS=localhost
HODEI_SERVER_PROTOCOL=http

# =============================================================================
# NATS MESSAGING
# =============================================================================
# NATS: usa port-forward si estás fuera del cluster
# Para acceso desde dentro del cluster:
# HODEI_NATS_URL=nats://nats.hodei-jobs.svc.cluster.local:4222
HODEI_NATS_URL=nats://localhost:4222

# =============================================================================
# WORKER CONFIGURATION
# =============================================================================
# Worker image para pods en Kubernetes (Alpine pública funciona en CRC)
HODEI_WORKER_IMAGE=default-route-openshift-image-registry.apps-crc.testing/hodei-jobs-workers/hodei-jobs-worker:latest

# =============================================================================
# PROVIDERS
# =============================================================================
HODEI_K8S_ENABLED=true
HODEI_K8S_SERVICE_NAME=hodei-server
HODEI_DOCKER_ENABLED=false

# =============================================================================
# DEVELOPMENT MODE
# =============================================================================
# HODEI_DEV_MODE=1: acepta tokens "dev-" en builds debug
# Útil para desarrollo local sin necesidad de OTP real
HODEI_DEV_MODE=1

# =============================================================================
# LOGGING
# =============================================================================
RUST_LOG=info
HODEI_LOG_PERSISTENCE_ENABLED=1
HODEI_LOG_PERSISTENCE_PATH=/tmp/hodei-logs

# =============================================================================
# DATABASE MIGRATIONS
# =============================================================================
HODEI_MIGRATIONS_PATH=crates/server/infrastructure/src/persistence/postgres/migrations/core,crates/server/infrastructure/src/persistence/postgres/migrations/infra
